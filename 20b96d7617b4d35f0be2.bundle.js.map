{"version":3,"file":"20b96d7617b4d35f0be2.bundle.js","mappings":"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","sources":["webpack://pockmas/webpack/runtime/chunk loaded","webpack://pockmas/webpack/runtime/create fake namespace object","webpack://pockmas/webpack/runtime/startup chunk dependencies","webpack://pockmas/./src/state/worker.ts","webpack://pockmas/webpack/bootstrap","webpack://pockmas/webpack/runtime/compat get default export","webpack://pockmas/webpack/runtime/define property getters","webpack://pockmas/webpack/runtime/ensure chunk","webpack://pockmas/webpack/runtime/get javascript chunk filename","webpack://pockmas/webpack/runtime/get mini-css chunk filename","webpack://pockmas/webpack/runtime/global","webpack://pockmas/webpack/runtime/hasOwnProperty shorthand","webpack://pockmas/webpack/runtime/make namespace object","webpack://pockmas/webpack/runtime/publicPath","webpack://pockmas/webpack/runtime/importScripts chunk loading","webpack://pockmas/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([\n\t\t__webpack_require__.e(453),\n\t\t__webpack_require__.e(5)\n\t]).then(next);\n};","import { RaptorExports } from \"../../raptor/wasm-exports\";\nimport { StopSearchExports } from \"../../stopsearch/wasm-exports\";\nimport { ActionType } from \"./actions/ActionType\";\nimport { ArrivalStopTermChanged } from \"./actions/ArrivalStopTermChanged\";\nimport { DepartureStopTermChanged } from \"./actions/DepartureStopTermChanged\";\nimport { InitializeRouting } from \"./actions/InitializeRouting\";\nimport { InitializeStopSearch } from \"./actions/InitializeStopSearch\";\nimport { State } from \"./State\";\nimport { StopsSelected } from \"./actions/StopsSelected\";\nimport { findTimeZone, getUnixTime, getZonedTime, populateTimeZones } from \"timezone-support/dist/lookup-convert\";\nimport { Itinerary } from \"./Itinerary\";\nimport { Leg } from \"./Leg\";\n\ntype Actions = InitializeStopSearch\n    | DepartureStopTermChanged\n    | ArrivalStopTermChanged\n    | InitializeRouting\n    | StopsSelected;\n\nlet stopSearchInstance: WebAssemblyInstance<StopSearchExports>;\nlet routingInstance: WebAssemblyInstance<RaptorExports>;\nlet stopGroupIndex: { name: string; stopIds: number[] }[];\nlet routeNames: [string, string, number, string | null][];\nlet stopNames: string[];\n\nasync function copyToWasmMemory<T extends WebAssembly.Exports & { memory: WebAssembly.Memory; }>(instance: WebAssemblyInstance<T>,\n    res: Response,\n    numSizes: number,\n    getOffset: (instance: WebAssemblyInstance<T>, sizes: number[]) => number) {\n    let reader = res.body.getReader();\n    let done = false;\n    let offset;\n    let sizes = [];\n    let sizesBuffer = new Uint8Array(numSizes * 4);\n    let received = 0;\n    while (!done) {\n        let read = await reader.read();\n        done = read.done;\n        if (read.done) {\n            break;\n        }\n        let data = read.value;\n\n        if (sizes.length == 0) {\n            sizesBuffer.set(data.slice(0, Math.min(4 * numSizes - received, data.byteLength)), received);\n            received += data.byteLength;\n            if (received < numSizes * 4) {\n                continue;\n            } else {\n                let view = new DataView(sizesBuffer.buffer);\n                for (let i = 0; i < numSizes; i++) {\n                    sizes.push(view.getUint32(i * 4, true));\n                }\n                data = data.slice(numSizes * 4 - received);\n            }\n        }\n        if (sizes.length > 0 && offset == undefined) {\n            offset = getOffset(instance, sizes);\n        }\n        if (offset != undefined) {\n            new Uint8Array(instance.exports.memory.buffer, offset, data.length).set(data);\n            offset += data.length;\n        }\n    }\n}\n\n\nasync function initRouting() {\n    if (routingInstance) {\n        return;\n    }\n    let routeNamesTask = fetch(new URL(\"../../preprocessing-dist/routes.json\", import.meta.url).toString()).then(res => res.json()).then(j => routeNames = j);\n    let stopNamesTask = fetch(new URL(\"../../preprocessing-dist/stopnames.txt\", import.meta.url).toString()).then(res => res.text()).then(text => stopNames = text.split(\"\\n\"));\n    let populateTimezonesTask = import(\"timezone-support/dist/data-2012-2022\").then(d => populateTimeZones(d));\n    let [instantiatedSource, binaryResponse] = await Promise.all([<Promise<WebAssemblyInstantiatedSource<RaptorExports>>>WebAssembly.instantiateStreaming(\n        fetch(new URL(\"../../raptor/raptor.wasm\", import.meta.url).toString())\n    ), fetch(new URL(\"../../preprocessing-dist/raptor_data.bin.bmp\", import.meta.url).toString())]);\n    await Promise.all([routeNamesTask, stopNamesTask, populateTimezonesTask, copyToWasmMemory(instantiatedSource.instance, binaryResponse, 8,\n        (instance, sizes) => instance.exports.raptor_allocate(sizes[0], sizes[1], sizes[2], sizes[3], sizes[4], sizes[5], sizes[6], sizes[7]))]);\n    routingInstance = instantiatedSource.instance;\n}\n\nasync function initStopSearch() {\n    if (stopSearchInstance) {\n        return;\n    }\n    let stopGroupIndexTask = fetch(new URL(\"../../preprocessing-dist/stopgroup-index.json\", import.meta.url).toString()).then(res => res.json()).then(idx => stopGroupIndex = idx);\n    let [instantiatedSource, binaryResponse] = await Promise.all([<Promise<WebAssemblyInstantiatedSource<StopSearchExports>>>WebAssembly.instantiateStreaming(\n        fetch(new URL(\"../../stopsearch/stopsearch.wasm\", import.meta.url).toString())\n    ), fetch(new URL(\"../../preprocessing-dist/stop_search.bin.bmp\", import.meta.url).toString())]);\n    await Promise.all([stopGroupIndexTask, copyToWasmMemory(instantiatedSource.instance, binaryResponse, 4, (instance, sizes) => instance.exports.stopsearch_allocate(sizes[0] / 12, sizes[1], sizes[3] / 2))]);\n    instantiatedSource.instance.exports.stopsearch_reset();\n    stopSearchInstance = instantiatedSource.instance;\n}\n\nlet lastValue: string = \"\";\nlet state: State = {\n    arrivalStopResults: [],\n    departureStopResults: [],\n    results: []\n};\n\nfunction updateState(updateFn: (oldState: State) => Partial<State>) {\n    let update = updateFn(state);\n    state = {\n        ...state,\n        ...update\n    };\n    self.postMessage([update, Object.keys(update)]);\n}\n\nfunction searchTermChanged(term: string, departure: boolean) {\n    if (null == stopSearchInstance) {\n        return;\n    }\n    let value = term.toLowerCase()\n        .replace(/ä/g, \"a\")\n        .replace(/ö/g, \"o\")\n        .replace(/ü/g, \"u\")\n        .replace(/ß/g, \"ss\")\n        .replace(/[^a-z0-9]/g, \" \")\n        .replace(/ +(?= )/g, '')\n        .trim()\n    if (value == lastValue) {\n        return;\n    }\n    let result;\n    if (value.length == lastValue.length + 1 && value.startsWith(lastValue)) {\n        result = stopSearchInstance.exports.stopsearch_step(value.charCodeAt(value.length - 1));\n    } else {\n        result = stopSearchInstance.exports.stopsearch_reset();\n        for (let i = 0; i < value.length; i++) {\n            result = stopSearchInstance.exports.stopsearch_step(value.charCodeAt(i));\n        }\n    }\n    lastValue = value;\n    let resultArrayView = new DataView(stopSearchInstance.exports.memory.buffer, result, 2 * 4);\n    let resultsCount = resultArrayView.getUint32(0, true);\n    let resultsOffset = resultArrayView.getUint32(4, true);\n    let resultsArray = new Uint16Array(stopSearchInstance.exports.memory.buffer, resultsOffset, resultsCount);\n    let results: { id: number, name: string }[] = [];\n    for (let i = 0; i < resultsCount; i++) {\n        let stopGroupId = resultsArray[i];\n        let stopGroup = stopGroupIndex[stopGroupId];\n        results.push({ id: stopGroupId, name: stopGroup.name });\n    }\n    updateState(s => ({\n        [departure ? \"departureStopResults\" : \"arrivalStopResults\"]: results\n    }));\n}\n\nfunction dayOfWeekToMask(date: Date) {\n    let mask = 0;\n    if (date.getDay() == 0) {\n        mask = 64;\n    } else {\n        mask = 1 << (date.getDay() - 1);\n    }\n    return mask;\n}\n\nconst RAPTOR_MAX_DEPARTURE_STOPS = 10;\nconst RAPTOR_MAX_ARRIVAL_STOPS = 10;\n\nconst RAPTOR_LEG_SIZE = 24;\nconst RAPTOR_MAX_LEGS = 10;\nconst RAPTOR_ITINERARY_SIZE = RAPTOR_MAX_LEGS * RAPTOR_LEG_SIZE + 4;\nconst RAPTOR_MAX_ITINERARIES = 8;\nconst RAPTOR_RESULTS_SIZE = RAPTOR_MAX_ITINERARIES * RAPTOR_ITINERARY_SIZE + 4;\n\nfunction getStartOfDayVienna(date: Date): number {\n    const vienna = findTimeZone(\"Europe/Vienna\");\n    const viennaTime = getZonedTime(date, vienna);\n    const startOfDayVienna = getUnixTime({\n        year: viennaTime.year,\n        month: viennaTime.month,\n        day: viennaTime.day,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n    }, vienna);\n    return startOfDayVienna;\n}\n\nfunction readLeg(buffer: ArrayBuffer, offset: number): Leg {\n    let view = new DataView(buffer, offset, RAPTOR_LEG_SIZE);\n    let departureStopId = view.getUint16(4, true);\n    let arrivalStopId = view.getUint16(6, true);\n    let departureSeconds = view.getUint32(8, true);\n    let arrivalSeconds = view.getUint32(12, true);\n    let leg: Leg = {\n        type: view.getUint32(0, true),\n        departureStop: {\n            stopId: departureStopId,\n            stopName: stopNames[departureStopId]\n        },\n        arrivalStop: {\n            stopId: arrivalStopId,\n            stopName: stopNames[arrivalStopId]\n        },\n        departureTime: new Date(getStartOfDayVienna(new Date()) + departureSeconds * 1000),\n        arrivalTime: new Date(getStartOfDayVienna(new Date()) + arrivalSeconds * 1000),\n        duration: (arrivalSeconds - departureSeconds) * 1000,\n        route: null,\n        tripId: null\n    };\n    if (leg.type == 1) {\n        let routeId = view.getUint16(16, true);\n        leg.route = {\n            name: routeNames[routeId][0],\n            color: routeNames[routeId].length > 3 ? routeNames[routeId][3] : (routeNames[routeId][2] == 0 ? \"c4121a\" : \"\"),\n            id: routeId,\n            headsign: routeNames[routeId][1]\n        };\n        leg.tripId = view.getUint32(18, true);\n    }\n    return leg;\n}\n\nfunction readItinerary(buffer: ArrayBuffer, offset: number): Itinerary {\n    let legs = [];\n    let view = new DataView(buffer, offset, RAPTOR_ITINERARY_SIZE);\n    let numLegs = view.getUint32(0, true);\n    for (let i = 0; i < numLegs; i++) {\n        legs.push(readLeg(buffer, offset + 4 + i * RAPTOR_LEG_SIZE));\n    }\n    return { legs: legs.reverse() };\n}\n\nfunction readResults(memory: WebAssembly.Memory, offset: number): Itinerary[] {\n    let itineraries = [];\n    let view = new DataView(memory.buffer, offset, RAPTOR_RESULTS_SIZE);\n    let numItineraries = view.getUint32(0, true);\n    for (let i = 0; i < numItineraries; i++) {\n        let itinerary = readItinerary(memory.buffer, offset + 4 + i * RAPTOR_ITINERARY_SIZE);\n        itineraries.push(itinerary);\n    }\n    return itineraries;\n}\n\nasync function stopsSelected(departure: number, arrival: number) {\n    if (null == routingInstance) {\n        return;\n    }\n    let now = new Date();\n    let requestMemory = routingInstance.exports.get_request_memory();\n    let view = new DataView(routingInstance.exports.memory.buffer, requestMemory, 4 + 4 + (RAPTOR_MAX_DEPARTURE_STOPS + RAPTOR_MAX_ARRIVAL_STOPS) * 2 + RAPTOR_MAX_DEPARTURE_STOPS * 4);\n    view.setUint8(0, 0);\n    let departureStops = stopGroupIndex[state.departureStopResults[departure].id].stopIds;\n    let arrivalStop = stopGroupIndex[state.arrivalStopResults[arrival].id].stopIds[0];\n    view.setUint8(1, Math.min(RAPTOR_MAX_DEPARTURE_STOPS, departureStops.length));\n    view.setUint8(2, 1);\n    view.setUint8(3, dayOfWeekToMask(now));\n    for (let i = 0; i < Math.min(RAPTOR_MAX_DEPARTURE_STOPS, departureStops.length); i++) {\n        view.setUint16(4 + i * 2, departureStops[i], true);\n    }\n    view.setUint16(4 + RAPTOR_MAX_DEPARTURE_STOPS * 2, arrivalStop, true);\n    let startOfDayVienna = getStartOfDayVienna(now);\n    let departureDate = startOfDayVienna / 1000;\n    let departureTime = (+now - startOfDayVienna) / 1000;\n    for (let i = 0; i < Math.min(RAPTOR_MAX_DEPARTURE_STOPS, departureStops.length); i++) {\n        view.setUint32(4 + (RAPTOR_MAX_DEPARTURE_STOPS + RAPTOR_MAX_ARRIVAL_STOPS) * 2 + i * 4, departureTime, true);\n    }\n    view.setUint32(4 + (RAPTOR_MAX_DEPARTURE_STOPS + RAPTOR_MAX_ARRIVAL_STOPS) * 2 + RAPTOR_MAX_DEPARTURE_STOPS * 4, departureDate, true);\n    let results = readResults(routingInstance.exports.memory, routingInstance.exports.raptor());\n    updateState(() => ({ results: results }))\n}\n\nasync function handleMessage(msg: Actions) {\n    switch (msg.type) {\n        case ActionType.InitializeStopSearch:\n            await initStopSearch();\n            break;\n        case ActionType.DepartureStopTermChanged: {\n            searchTermChanged(msg.term, true);\n            break;\n        }\n        case ActionType.ArrivalStopTermChanged: {\n            searchTermChanged(msg.term, false);\n            break;\n        }\n        case ActionType.InitializeRouting: {\n            await initRouting();\n            break;\n        }\n        case ActionType.StopsSelected: {\n            stopsSelected(msg.departure, msg.arrival);\n            break;\n        }\n    }\n}\n\nself.addEventListener(\"message\", ev => {\n    let msg: Actions = ev.data;\n    handleMessage(msg).catch(err => console.error(err));\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [453,5], function() { return __webpack_require__(9702); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + {\"5\":\"25ba1487fe8f8b80a704\",\"453\":\"fd03f84bf37ee1bafe74\",\"955\":\"aca8258eee8d7b804046\"}[chunkId] + \".bundle.js\";\n};","// This function allow to reference all chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","__webpack_require__.b = self.location + \"\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t702: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkpockmas\"] = self[\"webpackChunkpockmas\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","leafPrototypes","getProto","next","stopSearchInstance","routingInstance","stopGroupIndex","routeNames","stopNames","async","copyToWasmMemory","instance","res","numSizes","getOffset","offset","reader","body","getReader","done","sizes","sizesBuffer","Uint8Array","received","read","data","value","length","set","slice","Math","min","byteLength","view","DataView","buffer","i","push","getUint32","undefined","exports","memory","lastValue","state","arrivalStopResults","departureStopResults","results","updateState","updateFn","update","self","postMessage","Object","keys","searchTermChanged","term","departure","result","toLowerCase","replace","trim","startsWith","stopsearch_step","charCodeAt","stopsearch_reset","resultArrayView","resultsCount","resultsOffset","resultsArray","Uint16Array","stopGroupId","stopGroup","id","name","s","getStartOfDayVienna","date","vienna","viennaTime","year","month","day","hours","minutes","seconds","readLeg","departureStopId","getUint16","arrivalStopId","departureSeconds","arrivalSeconds","leg","type","departureStop","stopId","stopName","arrivalStop","departureTime","Date","arrivalTime","duration","route","tripId","routeId","color","headsign","readItinerary","legs","numLegs","RAPTOR_MAX_LEGS","reverse","handleMessage","msg","stopGroupIndexTask","fetch","URL","toString","then","json","idx","instantiatedSource","binaryResponse","Promise","all","WebAssembly","instantiateStreaming","stopsearch_allocate","initStopSearch","routeNamesTask","j","stopNamesTask","text","split","populateTimezonesTask","d","raptor_allocate","initRouting","arrival","now","requestMemory","get_request_memory","setUint8","departureStops","stopIds","mask","getDay","dayOfWeekToMask","setUint16","startOfDayVienna","departureDate","setUint32","itineraries","numItineraries","RAPTOR_MAX_ITINERARIES","itinerary","readResults","raptor","stopsSelected","addEventListener","ev","catch","err","console","error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","m","x","__webpack_exports__","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","key","splice","r","n","getter","__esModule","a","getPrototypeOf","obj","__proto__","t","mode","this","ns","create","def","current","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","get","f","e","chunkId","reduce","promises","u","miniCssF","g","globalThis","Function","window","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","p","b","location","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop"],"sourceRoot":""}