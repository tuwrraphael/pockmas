!function(){var e,t={3726:function(e,t,s){"use strict";s(3948);class r extends HTMLElement{constructor(){super(),this.popupShown=!1,this.source=this,this.keyListener=this.keyListener.bind(this),this.clickListener=this.clickListener.bind(this)}connectedCallback(){this.updateStyles()}keyListener(e){"Escape"==e.key&&this.hide()}setSource(e){this.source=e}clickListener(e){this.source.contains(e.target)||this.hide()}hide(){this.popupShown&&(document.removeEventListener("keydown",this.keyListener),document.removeEventListener("click",this.clickListener),this.popupShown=!1,this.updateStyles())}show(){this.popupShown||(document.addEventListener("keydown",this.keyListener),document.addEventListener("click",this.clickListener),this.popupShown=!0,this.updateStyles())}updateStyles(){this.style.display=this.popupShown?"":"none"}toggle(){this.popupShown?this.hide():this.show()}disconnectedCallback(){this.hide()}}function i(e,t,s,r){e.addEventListener(t,s),r.addEventListener("abort",(()=>{e.removeEventListener(t,s)}))}customElements.define("app-popup",r);const a="label";class n extends HTMLElement{constructor(){super()}connectedCallback(){this.rendered||(this.innerHTML='<button class="search-result-card__button"> <span class="search-result-card__text"></span> </button>',this.rendered=!0,this.text=this.querySelector(".search-result-card__text")),this.updateAttributes()}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(a);this.text.innerText=e}static get observedAttributes(){return[a]}disconnectedCallback(){}}customElements.define("search-result-card",n);const l="label";class c extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML='<button class="stop-search"> <label class="stop-search__label"></label> <div> <span class="stop-search__selected-result-label">auswählen</span> </div> </button> <app-popup> <div class="stop-search__search"> <div class="stop-search__search-input-container"> <label class="stop-search__label"></label> <input placeholder="Suche eine Station" class="stop-search__search-input" type="search" autocomplete="off" autocapitalize="off"> </div> <div class="stop-search__results"> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> </div> </div> </app-popup>',this.rendered=!0,this.labels=Array.from(this.querySelectorAll(".stop-search__label")),this.button=this.querySelector("button"),this.popup=this.querySelector("app-popup"),this.popup.setSource(this),this.input=this.querySelector(".stop-search__search-input"),this.searchResults=Array.from(this.querySelectorAll(".stop-search__search-result")),this.selectedResultLabel=this.querySelector(".stop-search__selected-result-label")),this.updateAttributes(),i(this.button,"click",(e=>this.onClick(e)),this.abortController.signal);for(let e=0;e<this.searchResults.length;e++)i(this.searchResults[e],"click",(t=>this.onSearchResultClick(e)),this.abortController.signal)}onClick(e){this.popup.show(),this.input.focus()}onSearchResultClick(e){this.selectedResultLabel.innerText=this.searchResults[e].getAttribute("label"),this.dispatchEvent(new CustomEvent("stop-selected",{detail:e})),this.popup.hide()}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[l]}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(l);for(let t of this.labels)t.innerText=e;this.button.setAttribute("title","".concat(e," auswählen")),this.labels[1].setAttribute("for","".concat(e,"-search-input")),this.input.setAttribute("id","".concat(e,"-search-input"))}disconnectedCallback(){this.abortController.abort()}get searchTerm(){return this.input.value}setResults(e){if(this.rendered)for(let t=0;t<this.searchResults.length;t++)t<e.length?(this.searchResults[t].setAttribute("label",e[t].name),this.searchResults[t].style.display=""):this.searchResults[t].style.display="none"}}customElements.define("stop-search",c),s(285),s(1637);class o{constructor(){this._state=null,this.subscriptions=[],this.worker=new Worker(new URL(s.p+s.u(702),s.b)),this.worker.addEventListener("message",(e=>{let[t,s]=e.data;this._state=Object.assign(Object.assign({},this._state),t);for(let e of this.subscriptions)try{e.call(this._state,s)}catch(e){console.error("Error while updating",e)}}))}get state(){return this._state}static getInstance(){return null==this.instance&&(this.instance=new o),this.instance}subscribe(e,t){let s={call:e};this.subscriptions.push(s),t&&t.addEventListener("abort",(()=>{this.subscriptions.splice(this.subscriptions.indexOf(s),1)}))}postAction(e){this.worker.postMessage(e)}}o.instance=null;class h{constructor(){this.type=0}}class u{constructor(e){this.term=e,this.type=1}}class d{constructor(e){this.term=e,this.type=2}}class p{constructor(e,t){this.departure=e,this.arrival=t,this.type=4}}class b extends HTMLElement{constructor(){super(),this.store=o.getInstance(),this.store.postAction(new h)}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML='<div> <stop-search label="Abfahrt" class="route-search__abfahrt" id="departure-stop-search"></stop-search> <stop-search label="Ziel" id="arrival-stop-search"></stop-search> </div>',this.departureStopSearch=this.querySelector("#departure-stop-search"),this.arrivalStopSearch=this.querySelector("#arrival-stop-search"),this.rendered=!0),this.store.subscribe(((e,t)=>this.update(e,t)),this.abortController.signal),i(this.departureStopSearch,"input",(()=>this.store.postAction(new u(this.departureStopSearch.searchTerm))),this.abortController.signal),i(this.arrivalStopSearch,"input",(()=>this.store.postAction(new d(this.arrivalStopSearch.searchTerm))),this.abortController.signal),i(this.departureStopSearch,"stop-selected",(e=>{this.selectedDepartureStop=e.detail,this.onStopsSelected()}),this.abortController.signal),i(this.arrivalStopSearch,"stop-selected",(e=>{this.selectedArrivalStop=e.detail,this.onStopsSelected()}),this.abortController.signal)}update(e,t){t.includes("departureStopResults")&&this.departureStopSearch.setResults(e.departureStopResults),t.includes("arrivalStopResults")&&this.arrivalStopSearch.setResults(e.arrivalStopResults)}onStopsSelected(){null!=this.selectedDepartureStop&&null!=this.selectedArrivalStop&&this.store.postAction(new p(this.selectedDepartureStop,this.selectedArrivalStop))}disconnectedCallback(){this.abortController.abort()}}customElements.define("route-search",b);class y{constructor(e,t,s){this.listElement=e,this.keySelector=t,this.createElement=s,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let s=new Map,r=e=>s.get(e)||(()=>{let t=this.keySelector(e);return s.set(e,t),t})();for(let s of Array.from(this.listElement.children)){let i=s,a=e.find((e=>this.elementToKey.get(i)==r(e)));a?t(i,a):this.listElement.removeChild(i)}let i=null,a=new Map;for(let s of e){let e=r(s),n=this.keyToElement.get(e);n||(n=this.createElement(s),t(n,s),this.elementToKey.set(n,e)),a.set(e,n),null==i&&n!=this.listElement.firstElementChild?this.listElement.prepend(n):null!=i&&i.nextElementSibling!=n&&i.insertAdjacentElement("afterend",n),i=n}this.keyToElement=a}}const m="route",f="route-color";class _ extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.rendered||(this.innerHTML='<span class="transit-display__route"></span>',this.rendered=!0,this.routeLabel=this.querySelector(".transit-display__route"),this.updateAttributes())}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[m,f]}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(m);this.routeLabel.innerText=e,this.style.backgroundColor=this.getAttribute(f)}disconnectedCallback(){}}customElements.define("transit-display",_);const g="minutes";class k extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.rendered||(this.innerHTML='<span class="material-icons"> directions_walk </span> <span class="walking-display__minutes"></span>',this.rendered=!0,this.minutesLabel=this.querySelector(".walking-display__minutes"),this.updateAttributes())}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[g]}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(g);this.minutesLabel.innerText="".concat(e,"m")}disconnectedCallback(){}}customElements.define("walking-display",k);class v extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.rendered||(this.innerHTML='<div class="route-summary__departure"> <span class="route-summary__departure-time">17:40</span> <div class="route-summary__departure-line"> <transit-display route="94A"></transit-display> </div> <span>Kagraner Anger</span> <span class="route-summary__departure-direction">Richtung Kagran</span> </div> <ol class="route-timeline"> <li class="route-timeline__time">17:31</li> <li> <walking-display minutes="6"></walking-display> </li> <li> <transit-display route="94A"></transit-display> </li> <li> <transit-display route="U1" route-color="#E3000F"></transit-display> </li> <li> <walking-display minutes="3"></walking-display> </li> <li class="route-timeline__time">18:10</li> </ol>',this.rendered=!0)}update(e){this.rendered}disconnectedCallback(){}}customElements.define("route-summary",v);class S extends HTMLElement{constructor(){super(),this.rendered=!1,this.itineraries=[],this.store=o.getInstance()}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML="<route-summary></route-summary> <route-summary></route-summary>",this.rendered=!0,this.renderer=new y(this,(e=>this.itineraries.indexOf(e)),(e=>new v))),this.store.subscribe(((e,t)=>this.update(e,t)),this.abortController.signal)}update(e,t){t.includes("results")&&(this.itineraries=e.results,this.renderer.update(this.itineraries,((e,t)=>{e.update(t)})))}disconnectedCallback(){this.abortController.abort()}}customElements.define("route-results",S),"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{navigator.serviceWorker.register("./sw.js").then((e=>{})).catch((e=>{console.log("SW registration failed: ",e)}))})),o.getInstance()},8006:function(e,t,s){var r=s(6324),i=s(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}}},s={};function r(e){var i=s[e];if(void 0!==i)return i.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=function(t,s,i,a){if(!s){var n=1/0;for(h=0;h<e.length;h++){s=e[h][0],i=e[h][1],a=e[h][2];for(var l=!0,c=0;c<s.length;c++)(!1&a||n>=a)&&Object.keys(r.O).every((function(e){return r.O[e](s[c])}))?s.splice(c--,1):(l=!1,a<n&&(n=a));if(l){e.splice(h--,1);var o=i();void 0!==o&&(t=o)}}return t}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[s,i,a]},r.u=function(e){return"2a4ba497bed573967ec7.bundle.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",function(){r.b=document.baseURI||self.location.href;var e={826:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,a,n=s[0],l=s[1],c=s[2],o=0;if(n.some((function(t){return 0!==e[t]}))){for(i in l)r.o(l,i)&&(r.m[i]=l[i]);if(c)var h=c(r)}for(t&&t(s);o<n.length;o++)a=n[o],r.o(e,a)&&e[a]&&e[a][0](),e[n[o]]=0;return r.O(h)},s=self.webpackChunkpockmas=self.webpackChunkpockmas||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var i=r.O(void 0,[453],(function(){return r(3726)}));i=r.O(i)}();
//# sourceMappingURL=382e8bf5369228f4d1fd.bundle.js.map