{"version":3,"file":"66f20c831a9953dfef93.bundle.js","mappings":"iNAOM,MAAOA,UAAyBC,YAMlCC,cACIC,QANI,KAAAC,UAAW,EASnBC,oBACIC,KAAKC,gBAAkB,IAAIC,gBACtBF,KAAKF,WACNE,KAAKG,UCnBN,0CDoBCH,KAAKF,UAAW,EAChBE,KAAKI,iBAAmBJ,KAAKK,cAAc,sBAE/CL,KAAKM,SAGDA,SACAN,KAAKF,UAAYE,KAAKO,WACtBP,KAAKI,iBAAiBI,OAAOR,KAAKO,WAI1CC,OAAOC,GACHT,KAAKO,UAAYE,EACjBT,KAAKM,SAGTI,uBACIV,KAAKC,gBAAgBU,SAI7BC,eAAeC,OAAO,oBAAqBnB,GEnCrC,MAAOoB,UAA6BnB,YAOtCC,cACIC,QAPI,KAAAC,UAAW,EAGX,KAAAiB,WAA0B,GAK9Bf,KAAKgB,MAAQC,EAAAA,EAAAA,cAGjBlB,oBACIC,KAAKC,gBAAkB,IAAIC,gBACtBF,KAAKF,WACNE,KAAKG,UCtBN,GDuBCH,KAAKF,UAAW,EAChBE,KAAKkB,SAAW,IAAIC,EAAAA,EAA4DnB,MAAMoB,GAAKpB,KAAKe,WAAWM,QAAQD,KAAIA,GAAK,IAAI1B,KAEpIM,KAAKgB,MAAMM,WAAU,CAACC,EAAGC,IAAMxB,KAAKQ,OAAOe,EAAGC,IAAIxB,KAAKC,gBAAgBwB,QACvEzB,KAAK0B,KAAK1B,KAAKgB,MAAMW,OAGjBC,WAAWL,IACVA,MAAAA,OAAC,EAADA,EAAGR,cAGRf,KAAKe,WAAaQ,EAAER,WACpBf,KAAKkB,SAASV,OAAOR,KAAKe,YAAY,CAACS,EAAGK,KACtCL,EAAEhB,OAAOqB,OAITrB,OAAOe,EAAUC,GACjBA,EAAEM,SAAS,eACX9B,KAAK4B,WAAWL,GAIhBG,KAAKH,GACTvB,KAAK4B,WAAWL,GAGpBb,uBACIV,KAAKC,gBAAgBU,SAI7BC,eAAeC,OAAO,yBAA0BC","sources":["webpack://pockmas/./src/components/DepartureSummary/DepartureSummary.ts","webpack://pockmas/./src/components/DepartureSummary/DepartureSummary.html","webpack://pockmas/./src/components/DepartureResultsList/DepartureResultsList.ts","webpack://pockmas/./src/components/DepartureResultsList/DepartureResultsList.html"],"sourcesContent":["import template from \"./DepartureSummary.html\";\nimport \"./DepartureSummary.scss\";\nimport \"../FlipTimeDisplay/FlipTimeDisplay\";\nimport { Departure } from \"../../lib/Departure\";\nimport \"../DepartureDisplay/DepartureDisplay\";\nimport { DepartureDisplay } from \"../DepartureDisplay/DepartureDisplay\";\n\nexport class DepartureSummary extends HTMLElement {\n    private rendered = false;\n    private abortController: AbortController;\n    private departureDisplay: DepartureDisplay;\n    private departure: Departure;\n\n    constructor() {\n        super();\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        if (!this.rendered) {\n            this.innerHTML = template;\n            this.rendered = true;\n            this.departureDisplay = this.querySelector(\"departure-display\");\n        }\n        this.render();\n    }\n\n    private render() {\n        if (this.rendered && this.departure) {\n            this.departureDisplay.update(this.departure);\n        }\n    }\n\n    update(data: Departure) {\n        this.departure = data;\n        this.render();\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"departure-summary\", DepartureSummary);\n","// Module\nvar code = \"<departure-display></departure-display>\";\n// Exports\nexport default code;","import { Departure } from \"../../lib/Departure\";\nimport { State, StateChanges } from \"../../state/State\";\nimport { Store } from \"../../state/Store\";\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\nimport { DepartureSummary } from \"../DepartureSummary/DepartureSummary\";\nimport template from \"./DepartureResultsList.html\";\nimport \"./DepartureResultsList.scss\";\n\nexport class DepartureResultsList extends HTMLElement {\n    private rendered = false;\n    private store: Store;\n    private abortController: AbortController;\n    private departures: Departure[] = [];\n    private renderer: ArrayToElementRenderer<Departure, DepartureSummary, number>;\n\n    constructor() {\n        super();\n        this.store = Store.getInstance();\n    }\n\n    connectedCallback() {\n        this.abortController = new AbortController();\n        if (!this.rendered) {\n            this.innerHTML = template;\n            this.rendered = true;\n            this.renderer = new ArrayToElementRenderer<Departure, DepartureSummary, number>(this, e => this.departures.indexOf(e), e => new DepartureSummary());\n        }\n        this.store.subscribe((s, c) => this.update(s, c), this.abortController.signal);\n        this.init(this.store.state);\n    }\n\n    private setResults(s: State) {\n        if (!s?.departures) {\n            return;\n        }\n        this.departures = s.departures;\n        this.renderer.update(this.departures, (c, i) => {\n            c.update(i)\n        });\n    }\n\n    private update(s: State, c: StateChanges) {\n        if (c.includes(\"departures\")) {\n            this.setResults(s);    \n        }\n    }\n\n    private init(s: State) {\n        this.setResults(s);\n    }\n\n    disconnectedCallback() {\n        this.abortController.abort();\n    }\n}\n\ncustomElements.define(\"departure-results-list\", DepartureResultsList);","// Module\nvar code = \"\";\n// Exports\nexport default code;"],"names":["DepartureSummary","HTMLElement","constructor","super","rendered","connectedCallback","this","abortController","AbortController","innerHTML","departureDisplay","querySelector","render","departure","update","data","disconnectedCallback","abort","customElements","define","DepartureResultsList","departures","store","Store","renderer","ArrayToElementRenderer","e","indexOf","subscribe","s","c","signal","init","state","setResults","i","includes"],"sourceRoot":""}