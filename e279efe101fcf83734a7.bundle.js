"use strict";(self.webpackChunkpockmas=self.webpackChunkpockmas||[]).push([[971],{4203:function(e,t,r){r(2208);var s=r(1807);const i=Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit"});class n extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML='<div class="departure-display__departure"> <flip-time-display class="departure-display__departure-time"></flip-time-display> <div> <transit-display class="departure-display__departure-line"></transit-display> </div> <span class="departure-display__departure-stop"></span> <span class="departure-display__planned-time"></span> <span class="departure-display__departure-direction">Richtung <span class="departure-display__departure-headsign"></span> </span> </div>',this.rendered=!0,this.departureTime=this.querySelector(".departure-display__departure-time"),this.plannedTime=this.querySelector(".departure-display__planned-time"),this.departureLine=this.querySelector(".departure-display__departure-line"),this.departureStop=this.querySelector(".departure-display__departure-stop"),this.departureHeadsign=this.querySelector(".departure-display__departure-headsign")),this.render()}render(){if(this.rendered&&this.departure){let e=new Date(this.departure.plannedDeparture.getTime()+1e3*this.departure.delay),t=i.format(e);this.departureTime.setAttribute("time",""+e.getTime()),this.departureTime.setAttribute("title","Abfahrt um ".concat(t));let r=i.format(this.departure.plannedDeparture),n=r!=t;this.plannedTime.innerText="".concat(this.departure.isRealtime?n?r:"p√ºnktlich":""),this.plannedTime.style.textDecoration=n?"line-through":"none",this.departureLine.setAttribute(s.wA,this.departure.route.name),this.departureLine.setAttribute(s.aL,this.departure.route.color),this.departureStop.innerText=this.departure.stop.stopName,this.departureHeadsign.innerText=this.departure.route.headsign}}update(e){this.departure=e,this.render()}disconnectedCallback(){this.abortController.abort()}}customElements.define("departure-display",n)},7971:function(e,t,r){r.r(t),r.d(t,{DepartureResultsList:function(){return a}}),r(6699);var s=r(4657),i=r(6029);r(2208),r(4203);class n extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML="<departure-display></departure-display>",this.rendered=!0,this.departureDisplay=this.querySelector("departure-display")),this.render()}render(){this.rendered&&this.departure&&this.departureDisplay.update(this.departure)}update(e){this.departure=e,this.render()}disconnectedCallback(){this.abortController.abort()}}customElements.define("departure-summary",n);class a extends HTMLElement{constructor(){super(),this.rendered=!1,this.departures=[],this.store=s.y.getInstance()}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML="",this.rendered=!0,this.renderer=new i.T(this,(e=>this.departures.indexOf(e)),(e=>new n))),this.store.subscribe(((e,t)=>this.update(e,t)),this.abortController.signal),this.init(this.store.state)}setResults(e){(null==e?void 0:e.departures)&&(this.departures=e.departures,this.renderer.update(this.departures,((e,t)=>{e.update(t)})))}update(e,t){t.includes("departures")&&this.setResults(e)}init(e){this.setResults(e)}disconnectedCallback(){this.abortController.abort()}}customElements.define("departure-results-list",a)},2208:function(){const e="text";class t extends HTMLElement{constructor(){super(),this.isFront=!0,this.beforeValue=null,this.animating=!1,this.connected=!1,this.queuedValue=null;let e=this.attachShadow({mode:"open"});e.innerHTML='<style>.box{perspective:5em;display:inline-block}.box-inner{transform-style:preserve-3d;display:inline-block;position:relative;border-radius:2px;transition:transform,box-shadow;animation-timing-function:ease-in-out}.back,.front{backface-visibility:hidden;display:inline-block;position:absolute;left:0}.front{transform:rotateX(0)}.back{transform:rotateX(180deg)}.actual{visibility:hidden}.show-back{animation:flip-front-to-back .8s;transform:rotateX(180deg)}.show-front{animation:flip-back-to-front .8s;transform:rotateX(0)}@keyframes flip-back-to-front{0%{transform:rotateX(180deg);box-shadow:none}10%{transform:rotateX(180deg)}50%{box-shadow:0 0 0 -1px rgb(0 0 0 / 20%),0 0 5px 0 rgb(0 0 0 / 14%),0 0 10px 0 rgb(0 0 0 / 12%)}90%{transform:rotateX(360deg)}100%{transform:rotateX(360deg);box-shadow:none}}@keyframes flip-front-to-back{0%{transform:rotateX(0);box-shadow:none}10%{transform:rotateX(0)}50%{box-shadow:0 0 0 -1px rgb(0 0 0 / 20%),0 0 5px 0 rgb(0 0 0 / 14%),0 0 10px 0 rgb(0 0 0 / 12%)}90%{transform:rotateX(180deg)}100%{transform:rotateX(180deg);box-shadow:none}}</style><span class="box"><span class="box-inner"><span class="front" aria-hidden="true"></span><span class="back" aria-hidden="true"></span><span class="actual"></span></span></span>',this.frontSpan=e.querySelector(".front"),this.backSpan=e.querySelector(".back"),this.boxInner=e.querySelector(".box-inner"),this.actualSpan=e.querySelector(".actual"),this.listener=()=>this.animationEnded()}connectedCallback(){this.connected=!0,this.boxInner.addEventListener("animationend",this.listener)}animationEnded(){this.animating=!1,this.queuedValue&&(this.updateAttributes(),this.queuedValue=null)}disconnectedCallback(){this.connected=!1,this.boxInner.removeEventListener("animationend",this.listener)}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[e]}updateAttributes(){let t=this.getAttribute(e);this.beforeValue?t!==this.beforeValue&&(this.animating?this.queuedValue=t:(this.isFront=!this.isFront,this.isFront?(this.frontSpan.innerText=t,this.boxInner.classList.remove("show-back"),this.boxInner.classList.add("show-front")):(this.backSpan.innerText=t,this.boxInner.classList.remove("show-front"),this.boxInner.classList.add("show-back")),this.connected&&(this.animating=!0),this.actualSpan.innerText=t,this.beforeValue=t)):(this.isFront=!0,this.frontSpan.innerText=t,this.backSpan.innerText="",this.boxInner.classList.remove("show-back"),this.boxInner.classList.remove("show-front"),this.beforeValue=t,this.actualSpan.innerText=t)}}customElements.define("flip-display",t);const r="time";class s extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"open"});e.innerHTML="<flip-display></flip-display><flip-display></flip-display>:<flip-display></flip-display><flip-display></flip-display>",this.digits=Array.from(e.querySelectorAll("flip-display"))}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[r]}updateAttributes(){let t=this.getAttribute(r),s=new Date(parseInt(t)),i=s.getHours(),n=s.getMinutes();this.digits[0].setAttribute(e,(i/10>>0).toString()),this.digits[1].setAttribute(e,(i%10).toString()),this.digits[2].setAttribute(e,(n/10>>0).toString()),this.digits[3].setAttribute(e,(n%10).toString())}}customElements.define("flip-time-display",s)},1807:function(e,t,r){r.d(t,{wA:function(){return s},aL:function(){return i},SA:function(){return a}});const s="route",i="route-color";class n extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.rendered||(this.innerHTML='<span class="transit-display__route"></span>',this.rendered=!0,this.routeLabel=this.querySelector(".transit-display__route"),this.updateAttributes())}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[s,i]}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(s);this.routeLabel.innerText=e;let t=this.getAttribute(i);this.style.backgroundColor=t?"#".concat(t):""}disconnectedCallback(){}}const a="transit-display";customElements.define(a,n)},6029:function(e,t,r){r.d(t,{T:function(){return s}}),r(3948);class s{constructor(e,t,r){this.listElement=e,this.keySelector=t,this.createElement=r,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let r=new Map,s=e=>r.get(e)||(()=>{let t=this.keySelector(e);return r.set(e,t),t})();for(let r of Array.from(this.listElement.children)){let i=r,n=e.find((e=>this.elementToKey.get(i)==s(e)));n?t(i,n):this.listElement.removeChild(i)}let i=null,n=new Map;for(let r of e){let e=s(r),a=this.keyToElement.get(e);a||(a=this.createElement(r),t(a,r),this.elementToKey.set(a,e)),n.set(e,a),null==i&&a!=this.listElement.firstElementChild?this.listElement.prepend(a):null!=i&&i.nextElementSibling!=a&&i.insertAdjacentElement("afterend",a),i=a}this.keyToElement=n}}}}]);
//# sourceMappingURL=e279efe101fcf83734a7.bundle.js.map