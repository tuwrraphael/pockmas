!function(){var e,t={7966:function(e,t,s){"use strict";s(3948);class r extends HTMLElement{constructor(){super(),this.popupShown=!1,this.source=this,this.keyListener=this.keyListener.bind(this),this.clickListener=this.clickListener.bind(this)}connectedCallback(){this.updateStyles()}keyListener(e){"Escape"==e.key&&this.hide()}setSource(e){this.source=e}clickListener(e){this.source.contains(e.target)||this.hide()}hide(){this.popupShown&&(document.removeEventListener("keydown",this.keyListener),document.removeEventListener("click",this.clickListener),this.popupShown=!1,this.updateStyles())}show(){this.popupShown||(document.addEventListener("keydown",this.keyListener),document.addEventListener("click",this.clickListener),this.popupShown=!0,this.updateStyles())}updateStyles(){this.style.display=this.popupShown?"":"none"}toggle(){this.popupShown?this.hide():this.show()}disconnectedCallback(){this.hide()}}function a(e,t,s,r){e.addEventListener(t,s),r.addEventListener("abort",(()=>{e.removeEventListener(t,s)}))}customElements.define("app-popup",r);const i="label";class c extends HTMLElement{constructor(){super()}connectedCallback(){this.rendered||(this.innerHTML='<button class="search-result-card__button"> <span class="search-result-card__text"></span> </button>',this.rendered=!0,this.text=this.querySelector(".search-result-card__text")),this.updateAttributes()}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(i);this.text.innerText=e}static get observedAttributes(){return[i]}disconnectedCallback(){}}customElements.define("search-result-card",c);class n extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML='<button class="stop-search"> <label class="stop-search__label"></label> <div> <span class="stop-search__selected-result-label">auswählen</span> </div> </button> <app-popup> <div class="stop-search__search"> <div class="stop-search__search-input-container"> <label class="stop-search__label"></label> <input placeholder="Suche eine Station" class="stop-search__search-input" type="search" autocomplete="off" autocapitalize="off"> </div> <div class="stop-search__results"> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> <search-result-card style="display:none" class="stop-search__search-result"></search-result-card> </div> </div> </app-popup>',this.rendered=!0,this.labels=Array.from(this.querySelectorAll(".stop-search__label")),this.button=this.querySelector("button"),this.popup=this.querySelector("app-popup"),this.popup.setSource(this),this.input=this.querySelector(".stop-search__search-input"),this.searchResults=Array.from(this.querySelectorAll(".stop-search__search-result")),this.selectedResultLabel=this.querySelector(".stop-search__selected-result-label")),this.updateAttributes(),a(this.button,"click",(e=>this.onClick(e)),this.abortController.signal);for(let e=0;e<this.searchResults.length;e++)a(this.searchResults[e],"click",(t=>this.onSearchResultClick(e)),this.abortController.signal)}onClick(e){this.popup.show(),this.input.focus()}onSearchResultClick(e){this.selectedResultLabel.innerText=this.searchResults[e].getAttribute("label"),this.popup.hide()}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute("label");for(let t of this.labels)t.innerText=e;this.button.setAttribute("title","".concat(e," auswählen")),this.labels[1].setAttribute("for","".concat(e,"-search-input")),this.input.setAttribute("id","".concat(e,"-search-input"))}disconnectedCallback(){this.abortController.abort()}get searchTerm(){return this.input.value}setResults(e){if(this.rendered)for(let t=0;t<this.searchResults.length;t++)t<e.length?(this.searchResults[t].setAttribute("label",e[t].name),this.searchResults[t].style.display=""):this.searchResults[t].style.display="none"}}customElements.define("stop-search",n),s(285),s(1637);class l{constructor(){this._state=null,this.subscriptions=[],this.worker=new Worker(new URL(s.p+s.u(702),s.b)),this.worker.addEventListener("message",(e=>{this._state=e.data;for(let e of this.subscriptions)try{e.call(this._state)}catch(e){console.error("Error while updating",e)}}))}get state(){return this._state}static getInstance(){return null==this.instance&&(this.instance=new l),this.instance}subscribe(e,t){let s={call:e};this.subscriptions.push(s),t&&t.addEventListener("abort",(()=>{this.subscriptions.splice(this.subscriptions.indexOf(s),1)}))}postAction(e){this.worker.postMessage(e)}}l.instance=null;class o{constructor(){this.type=0}}class h{constructor(e){this.term=e,this.type=1}}class u{constructor(e){this.term=e,this.type=2}}class p extends HTMLElement{constructor(){super(),this.store=l.getInstance(),this.store.postAction(new o)}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML='<div> <stop-search label="Abfahrt" class="route-search__abfahrt" id="departure-stop-search"></stop-search> <stop-search label="Ziel" id="arrival-stop-search"></stop-search> </div>',this.departureStopSearch=this.querySelector("#departure-stop-search"),this.arrivalStopSearch=this.querySelector("#arrival-stop-search"),this.rendered=!0),this.store.subscribe((e=>this.update(e)),this.abortController.signal),a(this.departureStopSearch,"input",(()=>this.store.postAction(new h(this.departureStopSearch.searchTerm))),this.abortController.signal),a(this.arrivalStopSearch,"input",(()=>this.store.postAction(new u(this.arrivalStopSearch.searchTerm))),this.abortController.signal)}update(e){this.departureStopSearch.setResults(e.departureStopResults),this.arrivalStopSearch.setResults(e.arrivalStopResults)}disconnectedCallback(){this.abortController.abort()}}customElements.define("route-search",p),"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{navigator.serviceWorker.register("./sw.js").then((e=>{})).catch((e=>{console.log("SW registration failed: ",e)}))}))},8006:function(e,t,s){var r=s(6324),a=s(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}}},s={};function r(e){var a=s[e];if(void 0!==a)return a.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=function(t,s,a,i){if(!s){var c=1/0;for(h=0;h<e.length;h++){s=e[h][0],a=e[h][1],i=e[h][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||c>=i)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(n=!1,i<c&&(c=i));if(n){e.splice(h--,1);var o=a();void 0!==o&&(t=o)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[s,a,i]},r.u=function(e){return"15f8b2d9de83d58b3669.bundle.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",function(){r.b=document.baseURI||self.location.href;var e={826:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,i,c=s[0],n=s[1],l=s[2],o=0;if(c.some((function(t){return 0!==e[t]}))){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(l)var h=l(r)}for(t&&t(s);o<c.length;o++)i=c[o],r.o(e,i)&&e[i]&&e[i][0](),e[c[o]]=0;return r.O(h)},s=self.webpackChunkpockmas=self.webpackChunkpockmas||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var a=r.O(void 0,[453],(function(){return r(7966)}));a=r.O(a)}();
//# sourceMappingURL=4e750be1ebe3930bc261.bundle.js.map