"use strict";(self.webpackChunkpockmas=self.webpackChunkpockmas||[]).push([[690],{542:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},5611:function(e,t,r){var s=r(542),i=r.n(s),n=new URL(r(4242),r.b),a='<div class="departure-display__departure"> <flip-time-display class="departure-display__departure-time"></flip-time-display> <div> <transit-display class="departure-display__departure-line"></transit-display> </div> <span class="departure-display__departure-headsign"></span> <span class="departure-display__planned-time"></span> <span class="departure-display__departure-stop-display"> <img class="departure-display__departure-stop-img" src="'+i()(n)+'" alt="Abfahrtsstation">Abfahrt: <span class="departure-display__departure-stop"></span> </span> </div>',o=(r(2208),r(1807));const l=Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit"});class d extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML=a,this.rendered=!0,this.departureTime=this.querySelector(".departure-display__departure-time"),this.plannedTime=this.querySelector(".departure-display__planned-time"),this.departureLine=this.querySelector(".departure-display__departure-line"),this.departureStop=this.querySelector(".departure-display__departure-stop"),this.departureHeadsign=this.querySelector(".departure-display__departure-headsign")),this.render()}render(){var e,t,r,s;if(this.rendered&&this.nextDeparture){if((null===(e=this.renderedDeparture)||void 0===e?void 0:e.plannedDeparture)!==this.nextDeparture.plannedDeparture||(null===(t=this.renderedDeparture)||void 0===t?void 0:t.delay)!==this.nextDeparture.delay||this.renderedDeparture.isRealtime!==this.nextDeparture.isRealtime){let e=new Date(this.nextDeparture.plannedDeparture.getTime()+1e3*this.nextDeparture.delay),t=l.format(e);this.departureTime.setAttribute("time",""+e.getTime()),this.departureTime.setAttribute("title",`Abfahrt um ${t}`);let r=l.format(this.nextDeparture.plannedDeparture),s=r!=t;this.plannedTime.innerText=`${this.nextDeparture.isRealtime?s?r:"p√ºnktlich":""}`,this.plannedTime.style.textDecoration=s?"line-through":"none"}(null===(r=this.renderedDeparture)||void 0===r?void 0:r.route.id)!==this.nextDeparture.route.id&&(this.departureLine.setAttribute(o.wA,this.nextDeparture.route.name),this.departureLine.setAttribute(o.aL,this.nextDeparture.route.color),this.departureHeadsign.innerText=this.nextDeparture.route.headsign),(null===(s=this.renderedDeparture)||void 0===s?void 0:s.stop.stopId)!==this.nextDeparture.stop.stopId&&(this.departureStop.innerText=this.nextDeparture.stop.stopName)}this.renderedDeparture=this.nextDeparture}update(e){this.nextDeparture=e,this.render()}disconnectedCallback(){this.abortController.abort()}}customElements.define("departure-display",d)},3690:function(e,t,r){r.r(t),r.d(t,{DepartureResultsList:function(){return o}});class s{constructor(){this.type=7}}var i=r(4657),n=r(6029);r(2208),r(5611);class a extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.abortController=new AbortController,this.rendered||(this.innerHTML="<departure-display></departure-display>",this.rendered=!0,this.departureDisplay=this.querySelector("departure-display")),this.render()}render(){this.rendered&&this.departure&&this.departureDisplay.update(this.departure)}update(e){this.departure=e,this.render()}disconnectedCallback(){this.abortController.abort()}}customElements.define("departure-summary",a);class o extends HTMLElement{constructor(){super(),this.rendered=!1,this.departures=[],this.moreRequestedAt=0,this.lastSelectedDest=null,this.store=i.y.getInstance()}requestMoreDepartures(){this.store.postAction(new s)}connectedCallback(){this.abortController=new AbortController,this.intersectionObserver=new IntersectionObserver((e=>{if(e.some((e=>e.isIntersecting))){if(this.moreRequestedAt>=this.departures.length)return;this.requestMoreDepartures(),this.moreRequestedAt=this.departures.length}})),this.rendered||(this.innerHTML="",this.rendered=!0,this.renderer=new n.T(this,(e=>this.departures.indexOf(e)),(e=>new a))),this.store.subscribe(((e,t)=>this.update(e,t)),this.abortController.signal),this.init(this.store.state)}setResults(e){(null==e?void 0:e.departures)&&(this.departures=e.departures,this.renderer.update(this.departures,((e,t)=>{e.update(t)})),this.intersectionObserver.disconnect(),this.lastElementChild&&this.intersectionObserver.observe(this.lastElementChild))}update(e,t){var r,s;t.includes("departures")&&this.setResults(e),t.includes("selectedStopgroups")&&(null===(r=e.selectedStopgroups.departure)||void 0===r?void 0:r.id)!=this.lastSelectedDest&&(this.lastSelectedDest=null===(s=e.selectedStopgroups.departure)||void 0===s?void 0:s.id,this.moreRequestedAt=0)}init(e){this.setResults(e)}disconnectedCallback(){this.abortController.abort(),this.intersectionObserver.disconnect()}}customElements.define("departure-results-list",o)},2208:function(){const e="text";class t extends HTMLElement{constructor(){super(),this.isFront=!0,this.beforeValue=null,this.animating=!1,this.connected=!1,this.queuedValue=null;let e=this.attachShadow({mode:"open"});e.innerHTML='<style>.box{perspective:5em;display:inline-block}.box-inner{transform-style:preserve-3d;display:inline-block;position:relative;border-radius:2px;transition:transform,box-shadow;animation-timing-function:ease-in-out}.back,.front{backface-visibility:hidden;display:inline-block;position:absolute;left:0}.front{transform:rotateX(0)}.back{transform:rotateX(180deg)}.actual{visibility:hidden}.show-back{animation:flip-front-to-back .8s;transform:rotateX(180deg)}.show-front{animation:flip-back-to-front .8s;transform:rotateX(0)}@keyframes flip-back-to-front{0%{transform:rotateX(180deg);box-shadow:none}10%{transform:rotateX(180deg)}50%{box-shadow:0 0 0 -1px rgb(0 0 0 / 20%),0 0 5px 0 rgb(0 0 0 / 14%),0 0 10px 0 rgb(0 0 0 / 12%)}90%{transform:rotateX(360deg)}100%{transform:rotateX(360deg);box-shadow:none}}@keyframes flip-front-to-back{0%{transform:rotateX(0);box-shadow:none}10%{transform:rotateX(0)}50%{box-shadow:0 0 0 -1px rgb(0 0 0 / 20%),0 0 5px 0 rgb(0 0 0 / 14%),0 0 10px 0 rgb(0 0 0 / 12%)}90%{transform:rotateX(180deg)}100%{transform:rotateX(180deg);box-shadow:none}}</style><span class="box"><span class="box-inner"><span class="front" aria-hidden="true"></span><span class="back" aria-hidden="true"></span><span class="actual"></span></span></span>',this.frontSpan=e.querySelector(".front"),this.backSpan=e.querySelector(".back"),this.boxInner=e.querySelector(".box-inner"),this.actualSpan=e.querySelector(".actual"),this.listener=()=>this.animationEnded()}connectedCallback(){this.connected=!0,this.boxInner.addEventListener("animationend",this.listener)}animationEnded(){this.animating=!1,this.queuedValue&&(this.updateAttributes(),this.queuedValue=null)}disconnectedCallback(){this.connected=!1,this.boxInner.removeEventListener("animationend",this.listener)}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[e]}updateAttributes(){let t=this.getAttribute(e);this.beforeValue?t!==this.beforeValue&&(this.animating?this.queuedValue=t:(this.isFront=!this.isFront,this.isFront?(this.frontSpan.innerText=t,this.boxInner.classList.remove("show-back"),this.boxInner.classList.add("show-front")):(this.backSpan.innerText=t,this.boxInner.classList.remove("show-front"),this.boxInner.classList.add("show-back")),this.connected&&(this.animating=!0),this.actualSpan.innerText=t,this.beforeValue=t)):(this.isFront=!0,this.frontSpan.innerText=t,this.backSpan.innerText="",this.boxInner.classList.remove("show-back"),this.boxInner.classList.remove("show-front"),this.beforeValue=t,this.actualSpan.innerText=t)}}customElements.define("flip-display",t);const r="time";class s extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"open"});e.innerHTML="<flip-display></flip-display><flip-display></flip-display>:<flip-display></flip-display><flip-display></flip-display>",this.digits=Array.from(e.querySelectorAll("flip-display"))}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[r]}updateAttributes(){let t=this.getAttribute(r),s=new Date(parseInt(t)),i=s.getHours(),n=s.getMinutes();this.digits[0].setAttribute(e,(i/10>>0).toString()),this.digits[1].setAttribute(e,(i%10).toString()),this.digits[2].setAttribute(e,(n/10>>0).toString()),this.digits[3].setAttribute(e,(n%10).toString())}}customElements.define("flip-time-display",s)},1807:function(e,t,r){r.d(t,{wA:function(){return s},aL:function(){return i},SA:function(){return a}});const s="route",i="route-color";class n extends HTMLElement{constructor(){super(),this.rendered=!1}connectedCallback(){this.rendered||(this.innerHTML='<span class="transit-display__route"></span>',this.rendered=!0,this.routeLabel=this.querySelector(".transit-display__route"),this.updateAttributes())}attributeChangedCallback(){this.updateAttributes()}static get observedAttributes(){return[s,i]}updateAttributes(){if(!this.rendered)return;let e=this.getAttribute(s)||"";e=e.replace(/\s/g,""),this.routeLabel.classList.toggle("transit-display__route--long",e.length>3),this.routeLabel.innerText=e;let t=this.getAttribute(i);this.style.backgroundColor=t?`#${t}`:""}disconnectedCallback(){}}const a="transit-display";customElements.define(a,n)},6029:function(e,t,r){r.d(t,{T:function(){return s}});class s{constructor(e,t,r){this.listElement=e,this.keySelector=t,this.createElement=r,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let r=new Map,s=(e,t)=>r.get(e)||(()=>{let s=this.keySelector(e,t);return r.set(e,s),s})();for(let r of Array.from(this.listElement.children)){let i=r,n=e.find(((e,t)=>this.elementToKey.get(i)==s(e,t)));n?t(i,n):this.listElement.removeChild(i)}let i=null,n=new Map;for(let r=0;r<e.length;r++){let a=e[r],o=s(a,r),l=this.keyToElement.get(o);l||(l=this.createElement(a),t(l,a),this.elementToKey.set(l,o)),n.set(o,l),null==i&&l!=this.listElement.firstElementChild?this.listElement.prepend(l):null!=i&&i.nextElementSibling!=l&&i.insertAdjacentElement("afterend",l),i=l}this.keyToElement=n}}},4242:function(e,t,r){e.exports=r.p+"13c17db0318beb7b7133.svg"}}]);
//# sourceMappingURL=8f544d00a0054e242d1d.bundle.js.map