!function(){"use strict";var e,t,n,r,o={9702:function(e,t,n){n(2472),n(3824),n(3948),n(285),n(1637),n(5306),n(8255);var r=n(9684);let o,a,i,s,u;async function f(e,t,n,r){let o,a=t.body.getReader(),i=!1,s=[],u=new Uint8Array(4*n),f=0;for(;!i;){let t=await a.read();if(i=t.done,t.done)break;let c=t.value;if(0==s.length){if(u.set(c.slice(0,Math.min(4*n-f,c.byteLength)),f),f+=c.byteLength,f<4*n)continue;{let e=new DataView(u.buffer);for(let t=0;t<n;t++)s.push(e.getUint32(4*t,!0));c=c.slice(4*n-f)}}s.length>0&&null==o&&(o=r(e,s)),null!=o&&(new Uint8Array(e.exports.memory.buffer,o,c.length).set(c),o+=c.length)}}let c="",l={arrivalStopResults:[],departureStopResults:[],results:[]};function p(e){let t=e(l);l=Object.assign(Object.assign({},l),t),self.postMessage([t,Object.keys(t)])}function d(e,t){if(null==o)return;let n,r=e.toLowerCase().replace(/ä/g,"a").replace(/ö/g,"o").replace(/ü/g,"u").replace(/ß/g,"ss").replace(/[^a-z0-9]/g," ").replace(/ +(?= )/g,"").trim();if(r==c)return;if(r.length==c.length+1&&r.startsWith(c))n=o.exports.stopsearch_step(r.charCodeAt(r.length-1));else{n=o.exports.stopsearch_reset();for(let e=0;e<r.length;e++)n=o.exports.stopsearch_step(r.charCodeAt(e))}c=r;let a=new DataView(o.exports.memory.buffer,n,8),s=a.getUint32(0,!0),u=a.getUint32(4,!0),f=new Uint16Array(o.exports.memory.buffer,u,s),l=[];for(let e=0;e<s;e++){let t=f[e],n=i[t];l.push({id:t,name:n.name})}p((e=>({[t?"departureStopResults":"arrivalStopResults"]:l})))}function b(e){const t=(0,r.yQ)("Europe/Vienna"),n=(0,r.iN)(e,t);return(0,r.ZG)({year:n.year,month:n.month,day:n.day,hours:0,minutes:0,seconds:0},t)}function h(e,t){let n=new DataView(e,t,24),r=n.getUint16(4,!0),o=n.getUint16(6,!0),a={type:n.getUint32(0,!0),departureStop:{stopId:r,stopName:u[r]},arrivalStop:{stopId:o,stopName:u[o]},departureTime:new Date(b(new Date)+1e3*n.getUint32(8,!0)),arrivalTime:new Date(b(new Date)+1e3*n.getUint32(12,!0)),route:null,tripId:null};if(1==a.type){let e=n.getUint16(16,!0);a.route={name:s[e][0],id:e},a.tripId=n.getUint32(18,!0)}return a}function g(e,t){let n=[],r=new DataView(e,t,244).getUint32(0,!0);for(let o=0;o<r;o++)n.push(h(e,t+4+24*o));return{legs:n.reverse()}}async function m(e){switch(e.type){case 0:await async function(){if(o)return;let e=fetch(new URL(n(3369),n.b).toString()).then((e=>e.json())).then((e=>i=e)),[t,r]=await Promise.all([WebAssembly.instantiateStreaming(fetch(new URL(n(7981),n.b).toString())),fetch(new URL(n(4156),n.b).toString())]);await Promise.all([e,f(t.instance,r,4,((e,t)=>e.exports.stopsearch_allocate(t[0]/12,t[1],t[3]/2)))]),t.instance.exports.stopsearch_reset(),o=t.instance}();break;case 1:d(e.term,!0);break;case 2:d(e.term,!1);break;case 3:await async function(){if(a)return;let e=fetch(new URL(n(9826),n.b).toString()).then((e=>e.json())).then((e=>s=e)),t=fetch(new URL(n(6400),n.b).toString()).then((e=>e.text())).then((e=>u=e.split("\n"))),o=n.e(955).then(n.t.bind(n,6955,23)).then((e=>(0,r.wE)(e))),[i,c]=await Promise.all([WebAssembly.instantiateStreaming(fetch(new URL(n(1645),n.b).toString())),fetch(new URL(n(717),n.b).toString())]);await Promise.all([e,t,o,f(i.instance,c,8,((e,t)=>e.exports.raptor_allocate(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])))]),a=i.instance}();break;case 4:!async function(e,t){if(null==a)return;let n=new Date,r=a.exports.get_request_memory(),o=new DataView(a.exports.memory.buffer,r,88);o.setUint8(0,0);let s=i[l.departureStopResults[e].id].stopIds,u=i[l.arrivalStopResults[t].id].stopIds[0];o.setUint8(1,Math.min(10,s.length)),o.setUint8(2,1),o.setUint8(3,function(e){let t=0;return t=0==e.getDay()?64:1<<e.getDay()-1,t}(n));for(let e=0;e<Math.min(10,s.length);e++)o.setUint16(4+2*e,s[e],!0);o.setUint16(24,u,!0);let f=b(n),c=f/1e3,d=(+n-f)/1e3;for(let e=0;e<Math.min(10,s.length);e++)o.setUint32(44+4*e,d,!0);o.setUint32(84,c,!0);let h=function(e,t){let n=[],r=new DataView(e.buffer,t,1956).getUint32(0,!0);for(let o=0;o<r;o++){let r=g(e.buffer,t+4+244*o);n.push(r)}return n}(a.exports.memory,a.exports.raptor());p((()=>({results:h})))}(e.departure,e.arrival)}}self.addEventListener("message",(e=>{m(e.data).catch((e=>console.error(e)))}))},717:function(e,t,n){e.exports=n.p+"28f7d4fb0f3c88e1e43a.bmp"},9826:function(e,t,n){e.exports=n.p+"757e1aa0deccd624e221.json"},4156:function(e,t,n){e.exports=n.p+"21dda1d42413362ae32c.bmp"},3369:function(e,t,n){e.exports=n.p+"f6631b00a5be80301ced.json"},6400:function(e,t,n){e.exports=n.p+"b516fb014e6aab462276.txt"},1645:function(e,t,n){e.exports=n.p+"d82b07940325a5e8b876.wasm"},7981:function(e,t,n){e.exports=n.p+"dd73a793a28d9ae7e6d0.wasm"}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,i),n.exports}i.m=o,i.x=function(){var e=i.O(void 0,[453,5],(function(){return i(9702)}));return i.O(e)},e=[],i.O=function(t,n,r,o){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],o=e[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[u])}))?n.splice(u--,1):(s=!1,o<a&&(a=o));if(s){e.splice(c--,1);var f=r();void 0!==f&&(t=f)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},i.d(o,a),o},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))},i.u=function(e){return{5:"25ba1487fe8f8b80a704",453:"fd03f84bf37ee1bafe74",955:"aca8258eee8d7b804046"}[e]+".bundle.js"},i.miniCssF=function(e){},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",function(){i.b=self.location+"";var e={702:1};i.f.i=function(t,n){e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunkpockmas=self.webpackChunkpockmas||[],n=t.push.bind(t);t.push=function(t){var r=t[0],o=t[1],a=t[2];for(var s in o)i.o(o,s)&&(i.m[s]=o[s]);for(a&&a(i);r.length;)e[r.pop()]=1;n(t)}}(),r=i.x,i.x=function(){return Promise.all([i.e(453),i.e(5)]).then(r)},i.x()}();
//# sourceMappingURL=2a4ba497bed573967ec7.bundle.js.map